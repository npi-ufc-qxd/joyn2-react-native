Object.defineProperty(exports, "__esModule", {
  value: true
});
var _jsxFileName = '/home/breno.sousa/Documents/joyn2-react-native/app/components/Register/Register.js';

var _react = require('react');

var _react2 = babelHelpers.interopRequireDefault(_react);

var _reactNative = require('react-native');

var _axios = require('axios');

var _axios2 = babelHelpers.interopRequireDefault(_axios);

var _RegisterForm = require('./RegisterForm');

var _RegisterForm2 = babelHelpers.interopRequireDefault(_RegisterForm);

var _Constants = require('../Constants');

var Register = function (_Component) {
  babelHelpers.inherits(Register, _Component);

  function Register() {
    babelHelpers.classCallCheck(this, Register);
    return babelHelpers.possibleConstructorReturn(this, (Register.__proto__ || Object.getPrototypeOf(Register)).apply(this, arguments));
  }

  babelHelpers.createClass(Register, [{
    key: 'doRegister',
    value: function doRegister(navigate, nomeCompleto, email, senha, confirmarSenha) {
      if (senha === confirmarSenha) {
        (0, _axios2.default)({
          method: 'post',
          url: _Constants.IP + '/cadastrar',
          data: {
            nome: nomeCompleto,
            email: email,
            senha: senha
          },
          headers: {
            'Content-Type': 'application/json'
          }
        }).then(function (response) {
          _reactNative.ToastAndroid.showWithGravity('Cadastro realizado com sucesso!', _reactNative.ToastAndroid.SHORT, _reactNative.ToastAndroid.CENTER);
          return navigate("Login");
        }).catch(function (error) {
          _reactNative.ToastAndroid.showWithGravity('Algum erro ocorreu, tente novamente!', _reactNative.ToastAndroid.SHORT, _reactNative.ToastAndroid.CENTER);
          console.log(error.message);
        });
      } else {
        _reactNative.ToastAndroid.showWithGravity('Senhas incorretas!', _reactNative.ToastAndroid.SHORT, _reactNative.ToastAndroid.CENTER);
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var navigate = this.props.navigation.navigate;

      return _react2.default.createElement(
        _reactNative.Image,
        {
          source: require("../../resources/images/login-bg.jpg"),
          style: styles.backgroundImage,
          blurRadius: 1,
          resizeMode: 'cover',
          __source: {
            fileName: _jsxFileName,
            lineNumber: 38
          }
        },
        _react2.default.createElement(_reactNative.StatusBar, {
          backgroundColor: 'rgba(44, 62, 80,1.0)',
          barStyle: 'light-content',
          __source: {
            fileName: _jsxFileName,
            lineNumber: 44
          }
        }),
        _react2.default.createElement(
          _reactNative.View,
          { style: styles.logoContainer, __source: {
              fileName: _jsxFileName,
              lineNumber: 48
            }
          },
          _react2.default.createElement(_reactNative.Image, {
            source: require("../../resources/images/joyn-logo.png"),
            style: styles.logo,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 49
            }
          })
        ),
        _react2.default.createElement(
          _reactNative.View,
          { style: styles.formContainer, __source: {
              fileName: _jsxFileName,
              lineNumber: 54
            }
          },
          _react2.default.createElement(_RegisterForm2.default, { navigate: navigate, doRegister: this.doRegister, __source: {
              fileName: _jsxFileName,
              lineNumber: 55
            }
          })
        )
      );
    }
  }]);
  return Register;
}(_react.Component);

exports.default = Register;


var styles = _reactNative.StyleSheet.create({
  backgroundImage: {
    flex: 1,
    width: null,
    height: null,
    justifyContent: "center",
    alignItems: "center"
  },

  logoContainer: {
    flexGrow: 1,
    justifyContent: "center",
    alignItems: "center"
  },
  logo: {
    height: 150,
    width: 150
  },
  title: {
    color: "white",
    marginTop: 10,
    opacity: 0.7
  },
  formContainer: {}
});

_reactNative.AppRegistry.registerComponent("Register", Register);